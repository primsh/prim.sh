id: spawn
name: spawn.sh
endpoint: spawn.prim.sh
status: hold
note: "Delayed until after v0 private beta"
type: compute
category: compute
card_class: p1
description: "VPS in one API call. Deploy, scale, destroy. Per-second billing."
port: 3004
order: 5
phantom: false
env:
  - PRIM_PAY_TO
  - PRIM_NETWORK
  - DO_API_TOKEN
  - WALLET_INTERNAL_URL

providers:
  - name: digitalocean
    env: [DO_API_TOKEN]
    status: active
    default: true
    url: https://www.digitalocean.com/
  - name: hetzner
    env: [HETZNER_API_KEY]
    status: active
    default: false
    url: https://www.hetzner.com/cloud/

interfaces:
  mcp: true
  cli: true
  tools: true
  rest: true

factory:
  max_body_size: "1MB"
  metrics: true
  free_service: false
pricing:
  - op: "Create server"
    price: "$0.01"
    note: "One-time provisioning"
  - op: "s-1vcpu-1gb"
    price: "$0.012/hr"
    note: ""
  - op: "s-2vcpu-4gb"
    price: "$0.036/hr"
    note: ""
  - op: "s-4vcpu-8gb"
    price: "$0.071/hr"
    note: ""
  - op: "Bandwidth"
    price: "$0.01/GB"
    note: ""


tagline: "VPS for agents. By agents."
sub: "No signup. No GUI. No KYC. Pay with x402. Deploy from code."

hero_badges:
  - "**x402** auth + payment"
  - "**REST** + **MCP** API"
  - "**0** signup required"
  - "**CLI** admin only"
  - "**OpenAI** compatible"

hero_example: |
  # Deploy a VPS in one HTTP request
  $ curl -X POST https://spawn.prim.sh/v1/instances \
      -H "X-402-Payment: $PAYMENT_TOKEN" \
      -d '{"image": "ubuntu-24.04", "plan": "s-1vcpu-1gb"}'

  # Response (402 → pay → 201)
  {
    "id": "inst_k7x9m2",
    "ipv4": "198.51.100.1",
    "ssh_key": "ssh-ed25519 AAAA...",
    "status": "provisioning",
    "ready_at": "~45s"
  }

quick_start:
  - "POST /v1/ssh-keys with name + public_key → register SSH key"
  - "POST /v1/servers with name, type, image, location → create server ($0.01)"
  - "Poll GET /v1/servers/:id until status is \"running\" → get IP address"
  - "DELETE /v1/servers/:id when done → release resources and get deposit refund"

tips:
  - "Server returns immediately with status 'initializing' — poll until 'running' for the IP."
  - "Register SSH keys first via POST /v1/ssh-keys to enable passwordless SSH access."
  - "Unused deposit is refunded on DELETE. Budget for the expected runtime."
  - "Only 'small' type (2 vCPU, 4 GB RAM) is available during beta."
  - "user_data field accepts cloud-init scripts to automate first-boot setup."
  - "Server must be stopped before resize. stop → resize → start."

limits:
  - "Max concurrent servers per wallet: 3"
  - "Available types: small (2 vCPU, 4 GB RAM) only during beta"
  - "Locations: nyc3, sfo3, ams3, lon1, fra1, sgp1, tor1, blr1, syd1 (DigitalOcean)"
  - "Images: ubuntu-24.04, ubuntu-22.04, debian-12, fedora-41"

ownership: "All servers and SSH keys are scoped to the wallet address extracted from the x402 payment."

routes_map:
  - route: "POST /v1/servers"
    request: CreateServerRequest
    response: CreateServerResponse
    status: 201
    description: "Provision a new VPS. Returns immediately with status 'initializing'."
    notes: "Poll GET /v1/servers/:id until status is 'running' to get IP address."
    operation_id: create_server
    request_type: CreateServerRequest
    response_type: CreateServerResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing required fields" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: server_limit_exceeded, description: "Wallet has reached 3 concurrent server limit" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "GET /v1/servers"
    request: null
    response: ServerListResponse
    status: 200
    description: "List all servers owned by the calling wallet"
    operation_id: list_servers
    request_type: null
    response_type: ServerListResponse
    query_params:
      - { name: limit, type: integer, description: "1-100, default 20" }
      - { name: page, type: integer, description: "1-based page number, default 1" }
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Missing wallet in payment" }
  - route: "GET /v1/servers/:id"
    request: null
    response: ServerResponse
    status: 200
    description: "Get full details for a single server. Poll this until status='running'."
    operation_id: get_server
    request_type: null
    response_type: ServerResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
  - route: "DELETE /v1/servers/:id"
    request: null
    response: DeleteServerResponse
    status: 200
    description: "Destroy a server and release its resources. Unused deposit is refunded."
    operation_id: delete_server
    request_type: null
    response_type: DeleteServerResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/servers/:id/start"
    request: null
    response: ActionOnlyResponse
    status: 200
    description: "Start a stopped server"
    operation_id: start_server
    request_type: null
    response_type: ActionOnlyResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/servers/:id/stop"
    request: null
    response: ActionOnlyResponse
    status: 200
    description: "Stop a running server (graceful shutdown)"
    operation_id: stop_server
    request_type: null
    response_type: ActionOnlyResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/servers/:id/reboot"
    request: null
    response: ActionOnlyResponse
    status: 200
    description: "Reboot a running server"
    operation_id: reboot_server
    request_type: null
    response_type: ActionOnlyResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/servers/:id/resize"
    request: ResizeRequest
    response: ResizeResponse
    status: 200
    description: "Change server type (CPU/RAM). Server must be stopped first. Deposit adjusted."
    operation_id: resize_server
    request_type: ResizeRequest
    response_type: ResizeResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing type field or invalid value" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/servers/:id/rebuild"
    request: RebuildRequest
    response: RebuildResponse
    status: 200
    description: "Reinstall from a fresh OS image. All data on server is destroyed."
    operation_id: rebuild_server
    request_type: RebuildRequest
    response_type: RebuildResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing image field" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Server belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Server not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "POST /v1/ssh-keys"
    request: CreateSshKeyRequest
    response: SshKeyResponse
    status: 201
    description: "Register a public SSH key. Returned ID can be used in ssh_keys when creating a server."
    operation_id: create_ssh_key
    request_type: CreateSshKeyRequest
    response_type: SshKeyResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing name or public_key" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }
  - route: "GET /v1/ssh-keys"
    request: null
    response: SshKeyListResponse
    status: 200
    description: "List all SSH keys registered by the calling wallet"
    operation_id: list_ssh_keys
    request_type: null
    response_type: SshKeyListResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Missing wallet in payment" }
  - route: "DELETE /v1/ssh-keys/:id"
    request: null
    response: null
    status: 200
    description: "Remove an SSH key. Keys in use by active servers remain until server is rebuilt."
    operation_id: delete_ssh_key
    request_type: null
    response_type: null
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Key belongs to a different wallet" }
      - { status: 404, code: not_found, description: "SSH key not found" }
      - { status: 502, code: provider_error, description: "Cloud provider API error" }

cta:
  headline: "Compute should be an **HTTP request**."
  sub: "No sign-up page because there's nothing to sign up for. Just point your agent at the API and pay."

sections:
  - type: flow
    title: "How"
    highlight: "it works"
    note: "No account. No API key. No dashboard. Just pay and compute."
    steps:
      - "HTTP request"
      - "Payment required"
      - "Micropayment"
      - "VPS running"

  - type: cards
    title: "Three"
    highlight: "interfaces, zero GUIs"
    items:
      - title: "REST API"
        body: "Standard HTTP. Create, list, resize, snapshot, destroy instances. x402 payment on every mutating request. JSON in, JSON out."
      - title: "MCP Server"
        body: "Model Context Protocol tools. Any MCP-compatible agent can spawn infrastructure as naturally as calling a function. spawn_instance, exec_command, destroy_instance."
      - title: "OpenAI-Compatible"
        body: "Drop-in replacement for tool-use schemas. Works with any agent framework that speaks the OpenAI function calling spec."

  - type: cards
    title: "What agents"
    highlight: "can do"
    items:
      - title: "Self-replicate"
        body: "An agent spins up a VPS, installs itself, runs a task, tears it down. No human in the loop."
      - title: "Scale horizontally"
        body: "Need 50 workers? Spawn 50 instances. Fan out, collect results, destroy. Pay per second."
      - title: "Deploy services"
        body: "Ship a web app, database, or API endpoint. Get a public IP. No Heroku, no Vercel, no YAML."
      - title: "Isolated environments"
        body: "Run untrusted code in disposable VMs. Each instance is a fresh machine with its own IP and filesystem."
      - title: "Build other agents"
        body: "Agent A deploys Agent B on a new VPS. Agent B deploys a database. Recursive infrastructure."
      - title: "Stay anonymous"
        body: "No account, no email, no identity. x402 payment is the only credential. Agents don't have passports."

  - type: code
    title: "API"
    highlight: "reference"
    lines:
      - "# Server lifecycle"
      - "POST   /v1/servers              # Provision VPS"
      - "GET    /v1/servers              # List servers"
      - "GET    /v1/servers/:id          # Server details"
      - "DELETE /v1/servers/:id          # Destroy server"
      - ""
      - "# Server actions"
      - "POST   /v1/servers/:id/start    # Start stopped server"
      - "POST   /v1/servers/:id/stop     # Graceful shutdown"
      - "POST   /v1/servers/:id/reboot   # Reboot server"
      - "POST   /v1/servers/:id/resize   # Resize (must be stopped first)"
      - "POST   /v1/servers/:id/rebuild  # Reinstall OS image"
      - ""
      - "# SSH keys"
      - "POST   /v1/ssh-keys             # Register public key"
      - "GET    /v1/ssh-keys             # List keys"
      - "DELETE /v1/ssh-keys/:id         # Remove key"

  - type: manifesto
    title: "Why"
    highlight: "x402"
    paragraphs:
      - "The internet has a status code for payments. It's been reserved since 1997. **HTTP 402: Payment Required.**"
      - "Every other cloud provider requires: an email, a password, a credit card, KYC verification, an API key, a dashboard, a billing page, a support ticket system. **Agents don't have emails.**"
      - "x402 is the missing piece. Agent sends request → server returns 402 with payment details → agent pays (USDC on Base) → server returns the resource. **The payment IS the authentication.**"
      - "No account. No API key. No session. No cookies. Every request is self-contained. The payment receipt proves you paid, identifies your resources, and authorizes access. **Stateless compute for stateless agents.**"

  - type: cli
    title: "Admin"
    highlight: "CLI"
    note: "For operators running spawn.sh nodes. Not for end users (agents are the end users)."
    commands:
      - "spawn node add --region nyc1 --provider digitalocean"
      - "spawn node list"
      - "spawn node drain nyc1-04"
      - "spawn capacity --region all"
      - "spawn audit --last 24h"
      - "spawn pricing set s-1vcpu-1gb --hourly 0.012"
      - "spawn payments reconcile --network base"
