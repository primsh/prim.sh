id: search
name: search.sh
endpoint: search.prim.sh
status: mainnet
type: search
category: intelligence
card_class: p12
description: "Search for agents. No ads, no SEO spam. Just facts and clean markdown."
port: 3005
order: 6
phantom: false
env:
  - PRIM_PAY_TO
  - PRIM_NETWORK
  - TAVILY_API_KEY
  - WALLET_INTERNAL_URL
pricing:
  - op: "Web search"
    price: "$0.01"
    note: "Per query"
  - op: "News search"
    price: "$0.01"
    note: "Per query"
  - op: "URL extract"
    price: "$0.005"
    note: "Per URL"

providers:
  - name: tavily
    env: [TAVILY_API_KEY]
    status: active
    default: true
    url: https://tavily.com/

interfaces:
  mcp: true
  cli: true
  openai: true
  rest: true

factory:
  max_body_size: "1MB"
  metrics: true
  free_service: false


tagline: "Search for agents."
sub: "Web search, news, and URL extraction. No ads, no SEO spam. Clean structured results and markdown. x402 auth."

hero_badges:
  - "**x402** auth"
  - "**Web** search"
  - "**News** search"
  - "**URL** extract"

hero_example: |
  # Web search
  $ curl -X POST https://search.prim.sh/v1/search \
      -H "X-402-Payment: $TOKEN" \
      -d '{"query": "latest Base network upgrades", "limit": 5}'

  { "results": [{ "title": "...", "url": "...", "content": "..." }] }

  # Extract a URL as clean markdown
  $ curl -X POST https://search.prim.sh/v1/extract \
      -H "X-402-Payment: $TOKEN" \
      -d '{"url": "https://example.com/article"}'

quick_start:
  - "POST /v1/search with {\"query\": \"...\", \"max_results\": 5} → web search results"
  - "POST /v1/search/news with {\"query\": \"...\"} → recent news articles"
  - "POST /v1/extract with {\"urls\": [\"https://...\"]} → clean markdown content"

tips:
  - "Set include_answer: true to get an AI-generated summary alongside search results."
  - "Use exclude_domains to remove noise sources (e.g. reddit.com, quora.com)."
  - "POST /v1/extract accepts a single URL string or an array of URLs."
  - "Failed extractions (paywalls, 404s) are reported in the failed array — the request still succeeds."
  - "Check Retry-After header on 429 responses before retrying."

limits:
  - "Max results per search: 20"
  - "Rate limit applies per wallet — check Retry-After header on 429"

ownership: "Stateless. No resources stored per wallet. Each request is independent."

routes_map:
  - route: "POST /v1/search"
    request: SearchRequest
    response: SearchResponse
    status: 200
    description: "Search the web and return ranked results with optional AI-generated answer"
    operation_id: search_web
    request_type: SearchRequest
    response_type: SearchResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing or invalid query" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 429, code: rate_limited, description: "Too many requests. Check Retry-After header." }
      - { status: 502, code: provider_error, description: "Upstream search provider unavailable" }
  - route: "POST /v1/search/news"
    request: SearchRequest
    response: SearchResponse
    status: 200
    description: "Search for recent news articles, ordered by recency"
    operation_id: search_news
    request_type: SearchRequest
    response_type: SearchResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing or invalid query" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 429, code: rate_limited, description: "Too many requests" }
      - { status: 502, code: provider_error, description: "Upstream search provider unavailable" }
  - route: "POST /v1/extract"
    request: ExtractRequest
    response: ExtractResponse
    status: 200
    description: "Extract readable content from one or more URLs as markdown or plain text"
    notes: "Failed extractions are in the failed array. Request succeeds if at least one URL was attempted."
    operation_id: extract_url
    request_type: ExtractRequest
    response_type: ExtractResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing urls field or invalid URL format" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 429, code: rate_limited, description: "Too many requests" }
      - { status: 502, code: provider_error, description: "Upstream extraction provider unavailable" }

cta:
  headline: "The web is an **API call**."
  sub: "Agents don't use browsers. They use search.sh."

sections:
  - type: cards
    title: "What agents"
    highlight: "use it for"
    items:
      - title: "Real-time research"
        body: "Agents need current facts. search.sh returns clean, structured results — no HTML parsing, no ad noise, no rate-limit negotiation."
      - title: "News monitoring"
        body: "Market agents, alert systems, and news digests query the news endpoint on a schedule. Get headlines and summaries, not raw HTML."
      - title: "URL ingestion"
        body: "Feed URLs to the extract endpoint and get clean markdown back. Pipe into mem.sh for RAG, or directly into your prompt."
      - title: "Grounding LLM responses"
        body: "Search before answering. Retrieve sources before claiming. search.sh is the grounding layer for any agent that needs to verify facts."

  - type: code
    title: "API"
    highlight: "reference"
    lines:
      - "POST  /v1/search       # Web search → structured results + snippets"
      - "POST  /v1/search/news  # News search → headlines + summaries"
      - "POST  /v1/extract      # URL → clean markdown"
