id: infer
name: infer.sh
endpoint: infer.prim.sh
status: hold
note: "Delayed until after v0 private beta"
type: intelligence
category: intelligence
description: "LLM inference for agents. Any model, any provider, one API. Per-token pricing. No API keys."
nounStyled: "The agent-native inference."
tagline: "Zero API keys. One prompt. Infinite models."
port: 3012
wraps: OpenRouter API
env:
  - PRIM_PAY_TO
  - PRIM_NETWORK
  - OPENROUTER_API_KEY
  - WALLET_INTERNAL_URL

pricing:
  - op: "Chat completion"
    price: "$0.01"
    provider_cost: "varies"
    pricing_type: dynamic
    as_of: "2026-02"
    estimate: "~$0.001-0.10 per request"
    note: "OpenRouter pass-through (needs dynamic pricing)"
  - op: "Embeddings"
    price: "$0.0001"
    provider_cost: "$0.0001"
    pricing_type: static
    as_of: "2026-02"
    note: "Embedding API at-cost"
  - op: "List models"
    price: "$0.001"
    provider_cost: "$0.00"
    pricing_type: static
    as_of: "2026-02"
    note: "x402 floor (free read)"

providers:
  - name: openrouter
    env: [OPENROUTER_API_KEY]
    status: active
    default: true
    url: https://openrouter.ai/

interfaces:
  mcp: true
  cli: true
  tools: true
  rest: true

factory:
  max_body_size: "1MB"
  metrics: true
  free_service: false

routes_map:
  - route: "POST /v1/chat"
    request: ChatRequest
    response: ChatResponse
    status: 200
    description: "Chat completion. Supports streaming, tool use, structured output."
    operation_id: chat
    errors:
      - { status: 400, code: invalid_request, description: "Missing or invalid model/messages" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 429, code: rate_limited, description: "Too many requests" }
      - { status: 502, code: provider_error, description: "Upstream model provider error" }
  - route: "POST /v1/embed"
    request: EmbedRequest
    response: EmbedResponse
    status: 200
    description: "Generate embeddings for text input. Returns vector array."
    operation_id: embed
    errors:
      - { status: 400, code: invalid_request, description: "Missing or invalid input" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 429, code: rate_limited, description: "Too many requests" }
      - { status: 502, code: provider_error, description: "Upstream provider error" }
  - route: "GET /v1/models"
    request: null
    response: ModelsResponse
    status: 200
    description: "List available models with pricing and capabilities."
    operation_id: list_models
    errors:
      - { status: 502, code: provider_error, description: "Unable to fetch model list" }
