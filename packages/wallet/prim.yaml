id: wallet
name: wallet.sh
endpoint: wallet.prim.sh
status: mainnet
type: crypto
category: identity
card_class: p20
description: "Agent wallets. Generate keys, hold USDC on Base, and pay any x402 invoice."
port: 3001
order: 1
phantom: false
env:
  - PRIM_PAY_TO
  - PRIM_NETWORK
  - PRIM_INTERNAL_KEY
deploy:
  access_log: true

pricing:
  - op: "Wallet registration"
    price: "free"
    provider_cost: "$0.00"
    pricing_type: static
    as_of: "2026-02"
    note: "Self-hosted keystore"
  - op: "API call"
    price: "$0.001"
    provider_cost: "$0.00"
    pricing_type: static
    as_of: "2026-02"
    note: "x402 floor (self-hosted)"
  - op: "Policy update"
    price: "$0.005"
    provider_cost: "$0.00"
    pricing_type: static
    as_of: "2026-02"
    note: "x402 floor (self-hosted)"


nounStyled: "The agent-native wallet."
tagline: "Zero accounts. One key. Infinite payments."
sub: "On-chain wallets for agents. Base USDC. x402 identity."

hero_badges:
  - "**Base** USDC"
  - "**x402** native"
  - "**Multi**-wallet"
  - "**Owner** funding"

hero_example: |
  # Create a wallet
  $ curl -X POST https://wallet.prim.sh/v1/wallets \
      -H "X-402-Payment: $TOKEN"

  { "address": "0xabc...", "network": "eip155:8453", "balances": { "USDC": "0.00" } }

  # Send USDC on Base
  $ curl -X POST https://wallet.prim.sh/v1/wallets/0xabc.../send \
      -H "X-402-Payment: $TOKEN" \
      -d '{"to": "0xdef...", "amount": "1.23", "asset": "USDC"}'

  # Pay another primitive via x402
  $ curl -X POST https://wallet.prim.sh/v1/x402/pay \
      -H "X-402-Payment: $TOKEN" \
      -d '{"url": "https://spawn.prim.sh/v1/instances", "max": "0.05"}'

quick_start:
  - "POST /v1/wallets with EIP-191 signature → register wallet (free)"
  - "POST faucet.prim.sh/v1/faucet/usdc → get 10 test USDC"
  - "Call any paid endpoint → receive 402 → sign payment → resend"

tips:
  - "Wallet registration is free — no x402 payment required."
  - "The signed message must be: Register <address> with prim.sh at <timestamp>"
  - "Timestamp must be within 5 minutes of server time (ISO 8601 UTC)."
  - "Use @x402/fetch or any x402-compatible client to handle payments automatically."
  - "Pause a wallet to temporarily block spending without deactivating it."

limits:
  - "Max wallets per owner: 100"

ownership: "All resources scoped to the wallet address extracted from the x402 payment signature. Wallet registration uses EIP-191 signature for ownership proof."

interfaces:
  mcp: true
  cli: true
  tools: true
  rest: true

factory:
  max_body_size: "1MB"
  metrics: true
  free_service: false

routes_map:
  - route: "POST /v1/wallets"
    request: RegisterWalletRequest
    response: RegisterWalletResponse
    status: 201
    description: "Register a wallet via EIP-191 signature"
    notes: "Free. No x402 required. Sign message: Register <address> with prim.sh at <timestamp>"
    operation_id: register_wallet
    request_type: RegisterWalletRequest
    response_type: RegisterWalletResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing fields or invalid signature format" }
      - { status: 403, code: forbidden, description: "Signature does not match address" }
      - { status: 409, code: duplicate_request, description: "Wallet already registered" }
  - route: "GET /v1/wallets"
    request: null
    response: WalletListResponse
    status: 200
    description: "List registered wallets owned by the calling wallet"
    operation_id: list_wallets
    request_type: null
    response_type: WalletListResponse
    query_params:
      - { name: limit, type: integer, description: "1-100, default 20" }
      - { name: after, type: string, description: "Cursor from previous response" }
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "No wallet address in payment" }
      - { status: 429, code: rate_limited, description: "Too many requests" }
  - route: "GET /v1/wallets/:address"
    request: null
    response: WalletDetailResponse
    status: 200
    description: "Get full wallet details including balance, policy, and status"
    operation_id: get_wallet
    request_type: null
    response_type: WalletDetailResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "DELETE /v1/wallets/:address"
    request: null
    response: DeactivateWalletResponse
    status: 200
    description: "Permanently deactivate a wallet. Irreversible. Pending fund requests cancelled."
    operation_id: deactivate_wallet
    request_type: null
    response_type: DeactivateWalletResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "POST /v1/wallets/:address/fund-request"
    request: CreateFundRequestRequest
    response: FundRequestResponse
    status: 200
    description: "Request USDC funding for a wallet. A human operator can approve or deny."
    operation_id: create_fund_request
    request_type: CreateFundRequestRequest
    response_type: FundRequestResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing amount or reason" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "GET /v1/wallets/:address/fund-requests"
    request: null
    response: FundRequestListResponse
    status: 200
    description: "List all fund requests for a wallet"
    operation_id: list_fund_requests
    request_type: null
    response_type: FundRequestListResponse
    query_params:
      - { name: limit, type: integer, description: "1-100, default 20" }
      - { name: after, type: string, description: "Cursor from previous response" }
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "POST /v1/fund-requests/:id/approve"
    request: null
    response: ApproveFundRequestResponse
    status: 200
    description: "Approve a pending fund request. Returns the address to send USDC to."
    operation_id: approve_fund_request
    request_type: null
    response_type: ApproveFundRequestResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller not authorized to approve" }
      - { status: 404, code: not_found, description: "Fund request not found" }
      - { status: 409, code: duplicate_request, description: "Already approved or denied" }
  - route: "POST /v1/fund-requests/:id/deny"
    request: DenyFundRequestRequest
    response: DenyFundRequestResponse
    status: 200
    description: "Deny a pending fund request"
    operation_id: deny_fund_request
    request_type: DenyFundRequestRequest
    response_type: DenyFundRequestResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller not authorized to deny" }
      - { status: 404, code: not_found, description: "Fund request not found" }
      - { status: 409, code: duplicate_request, description: "Already approved or denied" }
  - route: "GET /v1/wallets/:address/policy"
    request: null
    response: PolicyResponse
    status: 200
    description: "Get the spending policy for a wallet"
    operation_id: get_policy
    request_type: null
    response_type: PolicyResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "PUT /v1/wallets/:address/policy"
    request: PolicyUpdateRequest
    response: PolicyResponse
    status: 200
    description: "Update spending policy for a wallet. All fields optional. Pass null to remove a limit."
    operation_id: update_policy
    request_type: PolicyUpdateRequest
    response_type: PolicyResponse
    errors:
      - { status: 400, code: invalid_request, description: "Invalid JSON body or field values" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "POST /v1/wallets/:address/pause"
    request: PauseRequest
    response: PauseResponse
    status: 200
    description: "Pause operations for a wallet. Temporarily halts spending without deactivating."
    operation_id: pause_wallet
    request_type: PauseRequest
    response_type: PauseResponse
    errors:
      - { status: 400, code: invalid_request, description: "Invalid scope value" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }
  - route: "POST /v1/wallets/:address/resume"
    request: ResumeRequest
    response: ResumeResponse
    status: 200
    description: "Resume operations for a paused wallet"
    operation_id: resume_wallet
    request_type: ResumeRequest
    response_type: ResumeResponse
    errors:
      - { status: 400, code: invalid_request, description: "Invalid scope value" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Caller does not own this wallet" }
      - { status: 404, code: not_found, description: "Wallet not found" }

cta:
  headline: "Wallets are an **API call**."
  sub: "Agents don't KYC. They generate keys."

sections:
  - type: cards
    title: "What agents"
    highlight: "use it for"
    items:
      - title: "Service payments"
        body: "Pay for spawn, relay, infer, and other primitives without human API keys. The wallet is the identity and the payment source."
      - title: "Autonomous budgeting"
        body: "Give agents their own wallets with limits. Let them decide when to spend on computation, storage, or data."
      - title: "Multi-primitive flows"
        body: "Spawn compute, call models, store artifacts, and ship goods — all from the same wallet address."
      - title: "Owner funding"
        body: "Humans top up wallets in fiat or crypto. Agents spend via x402 without touching custody or keys."

  - type: code
    title: "API"
    highlight: "reference"
    lines:
      - "# Wallet management"
      - "POST   /v1/wallets                    # Register wallet (free, EIP-191 sig)"
      - "GET    /v1/wallets                    # List wallets"
      - "GET    /v1/wallets/:address           # Wallet details + balance"
      - "DELETE /v1/wallets/:address           # Deactivate wallet (irreversible)"
      - ""
      - "# Funding"
      - "POST   /v1/wallets/:address/fund-request   # Request USDC funding"
      - "GET    /v1/wallets/:address/fund-requests  # List fund requests"
      - "POST   /v1/fund-requests/:id/approve       # Approve request"
      - "POST   /v1/fund-requests/:id/deny          # Deny request"
      - ""
      - "# Policy + control"
      - "GET    /v1/wallets/:address/policy    # Get spending policy"
      - "PUT    /v1/wallets/:address/policy    # Update spending policy"
      - "POST   /v1/wallets/:address/pause     # Pause wallet"
      - "POST   /v1/wallets/:address/resume    # Resume wallet"
