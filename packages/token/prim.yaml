id: token
name: token.sh
status: hold
endpoint: token.prim.sh
type: defi
category: crypto
card_class: p9
description: "Deploy ERC-20 tokens and Uniswap V3 pools. No wallet setup required."
port: 3007
order: 7
phantom: false
env:
  - PRIM_PAY_TO
  - PRIM_NETWORK
  - TOKEN_MASTER_KEY
  - TOKEN_DEPLOYER_ENCRYPTED_KEY
  - BASE_RPC_URL
  - WALLET_INTERNAL_URL
pricing:
  - op: "Deploy token"
    price: "$1.00"
    note: "Covers on-chain gas"
  - op: "Mint"
    price: "$0.10"
    note: "Covers on-chain gas"
  - op: "Create pool"
    price: "$0.50"
    note: "Uniswap V3 + gas"
  - op: "Read"
    price: "$0.001"
    note: "Per request"

providers:
  - name: viem
    env: [BASE_RPC_URL]
    status: active
    default: true
    url: https://viem.sh/

interfaces:
  mcp: true
  cli: true
  tools: true
  rest: true

factory:
  max_body_size: "1MB"
  metrics: true
  free_service: false


nounStyled: "The agent-native token factory."
tagline: "Zero solidity. One call. Infinite tokens."
sub: "Deploy ERC-20 tokens and Uniswap pools via API."

hero_badges:
  - "**ERC-20** deploy"
  - "**Uniswap V3** pools"
  - "**x402** auth"
  - "**Base** + Sepolia"

hero_example: |
  # Deploy an ERC-20 token
  $ curl -X POST https://token.prim.sh/v1/tokens \
      -H "X-402-Payment: $TOKEN" \
      -d '{"name": "MyToken", "symbol": "MTK", "supply": 1000000}'

  { "id": "tok_k8m2x7", "address": "0xabc...", "network": "eip155:84532" }

  # Create a Uniswap V3 pool at $0.001/token
  $ curl -X POST https://token.prim.sh/v1/tokens/tok_k8m2x7/pool \
      -H "X-402-Payment: $TOKEN" \
      -d '{"price_usdc": "0.001"}'

quick_start:
  - "POST /v1/tokens with name, symbol, initialSupply → deploy ERC-20 ($1.00)"
  - "Poll GET /v1/tokens/:id until deployStatus is 'confirmed' → get contractAddress"
  - "POST /v1/tokens/:id/mint → mint additional supply (mintable=true required)"
  - "POST /v1/tokens/:id/pool with pricePerToken → create Uniswap V3 pool ($0.50)"

tips:
  - "Deploy is asynchronous — poll GET /v1/tokens/:id until deployStatus is 'confirmed' before minting or creating a pool."
  - "All supply values are strings representing raw integers (e.g. '1000000000000000000' for 1 token with 18 decimals)."
  - "USDC has 6 decimals — $1 USDC = '1000000' in raw units."
  - "One pool per token. POST /v1/tokens/:id/pool returns 409 pool_exists if already created."
  - "liquidity-params response includes approvals[] — submit each on-chain before calling addLiquidity."

limits:
  - "One Uniswap V3 pool per token (pool_exists error on second attempt)"
  - "Mint requires mintable=true at deploy time — immutable after deployment"

ownership: "Tokens are scoped to the wallet address extracted from the x402 payment. Only the deploying wallet can mint or create pools."

routes_map:
  - route: "POST /v1/tokens"
    request: CreateTokenRequest
    response: TokenResponse
    status: 201
    description: "Deploy a new ERC-20 token. Returns immediately with deployStatus: 'pending'."
    notes: "Poll GET /v1/tokens/:id until deployStatus is 'confirmed' before minting or pooling."
    operation_id: deploy_token
    request_type: CreateTokenRequest
    response_type: TokenResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing required fields or invalid values" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }
  - route: "GET /v1/tokens"
    request: null
    response: TokenListResponse
    status: 200
    description: "List tokens deployed by the authenticated wallet"
    operation_id: list_tokens
    request_type: null
    response_type: TokenListResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Missing wallet in payment" }
  - route: "GET /v1/tokens/:id"
    request: null
    response: TokenResponse
    status: 200
    description: "Get token details: deployStatus, contractAddress, supply, pool"
    operation_id: get_token
    request_type: null
    response_type: TokenResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token ID does not exist" }
  - route: "POST /v1/tokens/:id/mint"
    request: MintRequest
    response: MintResponse
    status: 200
    description: "Mint additional tokens to an address. Requires mintable=true at deploy time."
    operation_id: mint_tokens
    request_type: MintRequest
    response_type: MintResponse
    errors:
      - { status: 400, code: not_mintable, description: "Token deployed with mintable=false" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token ID does not exist" }
      - { status: 422, code: exceeds_max_supply, description: "Mint would exceed maxSupply" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }
  - route: "GET /v1/tokens/:id/supply"
    request: null
    response: SupplyResponse
    status: 200
    description: "Live on-chain total supply from contract"
    operation_id: get_token_supply
    request_type: null
    response_type: SupplyResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token ID does not exist" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }
  - route: "POST /v1/tokens/:id/pool"
    request: CreatePoolRequest
    response: PoolResponse
    status: 201
    description: "Create and initialize a Uniswap V3 pool paired with USDC. One pool per token."
    operation_id: create_pool
    request_type: CreatePoolRequest
    response_type: PoolResponse
    errors:
      - { status: 400, code: invalid_request, description: "Missing pricePerToken or invalid feeTier" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token ID does not exist" }
      - { status: 409, code: pool_exists, description: "Pool already exists for this token" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }
  - route: "GET /v1/tokens/:id/pool"
    request: null
    response: PoolResponse
    status: 200
    description: "Get pool details: poolAddress, token0, token1, fee, sqrtPriceX96, tick"
    operation_id: get_pool
    request_type: null
    response_type: PoolResponse
    errors:
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token or pool not found" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }
  - route: "GET /v1/tokens/:id/pool/liquidity-params"
    request: null
    response: LiquidityParamsResponse
    status: 200
    description: "Get calldata for adding liquidity. Returns approvals[] and position manager params."
    operation_id: get_liquidity_params
    request_type: null
    response_type: LiquidityParamsResponse
    query_params:
      - { name: tokenAmount, type: string, description: "Raw token amount to add as liquidity" }
      - { name: usdcAmount, type: string, description: "Raw USDC amount to pair (6 decimals)" }
    errors:
      - { status: 400, code: invalid_request, description: "Missing tokenAmount or usdcAmount" }
      - { status: 402, code: payment_required, description: "x402 payment needed" }
      - { status: 403, code: forbidden, description: "Token belongs to a different wallet" }
      - { status: 404, code: not_found, description: "Token or pool not found" }
      - { status: 502, code: rpc_error, description: "Base RPC error" }

cta:
  headline: "Tokens are an **API call**."
  sub: "Agents don't need MetaMask. They deploy contracts."

sections:
  - type: cards
    title: "What agents"
    highlight: "use it for"
    items:
      - title: "Project tokens"
        body: "Deploy a named ERC-20 with custom supply and decimals. Set the agent wallet as owner. Start distributing."
      - title: "Liquidity pools"
        body: "Create a Uniswap V3 pool paired with USDC at a chosen price. Get pre-computed liquidity calldata."
      - title: "Reward systems"
        body: "Mint tokens to reward contributors, users, or other agents. Cap supply or allow unlimited minting."
      - title: "On-chain coordination"
        body: "Use tokens as reputation, voting weight, or stake in multi-agent systems. The token IS the credential."

  - type: code
    title: "API"
    highlight: "reference"
    lines:
      - "POST   /v1/tokens              # Deploy ERC-20 token"
      - "GET    /v1/tokens              # List your tokens"
      - "GET    /v1/tokens/:id          # Token details + on-chain data"
      - "POST   /v1/tokens/:id/mint     # Mint additional supply"
      - "POST   /v1/tokens/:id/pool     # Create Uniswap V3 pool"
      - "GET    /v1/tokens/:id/pool/liquidity-params  # Add liquidity calldata"
